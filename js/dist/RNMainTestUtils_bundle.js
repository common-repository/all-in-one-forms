rndefine("#RNMainTestUtils",["exports","#RNMainFormBuilderCore/ConditionProcessorBase","#RNMainFormBuilderCore/ConditionBase.Options","#RNMainFormBuilderCore/FormBuilder.Model","#RNMainFormBuilderCore/FormBuilder.Options","#RNMainFormBuilderCore/FieldBase.Options","#RNMainFormBuilderCore/FBRow.Options","#RNMainFormBuilderCore/FBColumn.Options","#RNMainTextField/TextField.Options","#RNMainNumericField/NumericField.Options","#RNMainNameField/NameField.Options","#RNMainRepeaterField/RepeaterField.Options","#RNMainFormBuilderCore/ItemOptions.Options","#RNMainCheckBoxField/CheckBoxField.Options","#RNMainDatePickerField/DatePickerField.Options","#RNMainListField/ListField.Options","#RNMainSwitchField/SwitchField.Options","#RNMainCore/EventManager","#RNMainFormBuilderCore/CalculatorBase","#RNMainBuilder/FormBuilderDesigner.Model","#RNMainFormulaCore/FRDataRetriever","#RNMainFormBuilderCore/FieldBase.Model","#RNMainCore/Sanitizer","#RNMainFormulaCore/FRMain","#RNMainParser/CustomLanguage","#RNMainParser/Parser","#RNMainParser/FormulaFunctionDictionary","#RNMainTextField/TextField.Model"],(function(e,t,i,n,o,r,s,l,d,u,a,c,p,F,m,h,O,C,P,M,R,T,w,y,A,D,b,B){"use strict";class g extends(x(Object)){constructor(...e){super(...e),this.Options=(new c.RepeaterFieldOptions).Merge()}}class N{constructor(e){this.Options=(new F.CheckBoxFieldOptions).Merge({Id:e}),this.Options.Options=[]}AddOption(e,t,i=!1,n="",o=[]){return this.Options.Options.push((new p.ItemOptions).Merge({Id:e,Label:t,Selected:i,RegularPrice:n,AdditionalOptionValue:o.map((e=>(new p.AdditionalOptionValue).Merge(e)))})),this}AddAdditionalColumns(e,t){this.Options.AdditionalOptionColumn.push((new p.AdditionalColumnOptions).Merge({Id:e,Label:t}))}}class f{constructor(){this.Columns=[],this.RowValues=[]}AddColumn(e,t){return this.Columns.push({Id:e,Label:t}),this}AddRowValue(e){this.RowValues.push(e)}}class v{constructor(e){this.Options=e}AddCondition(e){this.Options.Conditions.push(e)}}function I(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function x(e){return class extends e{async AddField(e,t,i=!0){let n=t;t instanceof r.FieldBaseOptions||(n=(new t).Merge({Id:e}));let o=(new s.FBRowOptions).Merge(),d=(new l.FBColumnOptions).Merge();if(d.Field=n,o.Columns.push(d),null!=this.Options.RepeaterItemTemplate?this.Options.RepeaterItemTemplate.Rows.push(o):this.Options.Rows.push(o),null!=this.ClearForm){return await this.ClearForm(),this.GetFieldById(e)}return null}AddTextField(e="",t=1,i=null,n=null){let o=new v((new d.TextFieldOptions).Merge({Id:t,DefaultText:e}));return null!==i&&(o.Options.PriceType="Dummy",o.Options.DummyPrice=i),null!=n&&n(o),this.AddField(t,o.Options)}AddNumericField(e,t=1,i=null){let n=new v((new u.NumericFieldOptions).Merge({Id:t,DefaultValue:e.toString()}));return null!=i&&i(n),this.AddField(t,n.Options)}AddNameField(e,t,i=1,n=null){let o=new v((new a.NameFieldOptions).Merge({Id:i,FirstNameDefaultText:e,LastNameDefaultText:t}));return null!=n&&n(o),this.AddField(i,o.Options)}AddRepeaterField(e,t=1){let i=new g(t);return null!=e&&e(i),this.AddField(t,i.Options)}AddCheckBoxField(e,t=1){let i=new N(t);return null!=e&&e(i),this.AddField(t,i.Options)}AddDateField(e,t=1,i=null){let n=new v((new m.DatePickerFieldOptions).Merge({Id:t,DefaultDate:e}));return null!=i&&i(n),this.AddField(t,n.Options)}AddList(e,t=1){let i=new f;null!=e&&e(i);let n=[],o=1;for(let e of i.RowValues)n.push({Columns:e,Id:o}),o++;this.AddPreviousData(t,{Value:n});let r=(new h.ListFieldOptions).Merge({Id:t});for(let e of i.Columns)r.Columns.push((new h.ListColumnOptions).Merge({Id:e.Id,Name:e.Label}));r.EnableMultipleColumns=i.Columns.length>1,this.AddField(t,r)}AddPreviousData(e,t={}){null==this.PreviousData&&(this.PreviousData=[]),null==this.PreviousData.Fields&&(this.PreviousData.Fields=[]),this.PreviousData.Fields.push(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?I(Object(i),!0).forEach((function(t){babelHelpers.defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({Id:e},t))}RemovePreviousData(e,t=!1){var i,n;let o=null===(i=this.PreviousData)||void 0===i||null===(n=i.Fields)||void 0===n?void 0:n.find((t=>t.Id==e));null!==o&&(this.PreviousData.Fields.splice(this.PreviousData.Fields.indexOf(o),1),t&&this.ClearForm())}AddSwitchField(e,t=1,i=null){let n=new v((new O.SwitchFieldOptions).Merge({Id:t,Checked:e}));return null!=i&&i(n),this.AddField(t,n.Options)}}}function G(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}class L extends(x(n.FormBuilderModel)){constructor(e=1,t=null,i=null){super(e,null==t?(new o.FormBuilderOptions).Merge():t,null==i?{}:i),this.FormId=e,this.AdditionalOptions.CurrentUser={Id:1,Roles:["administrator"]}}AddPreviousData(e,t={}){null==this.PreviousData&&(this.PreviousData=[]),null==this.PreviousData.Fields&&(this.PreviousData.Fields=[]),this.PreviousData.Fields.push(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?G(Object(i),!0).forEach((function(t){babelHelpers.defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({Id:e},t))}async SubmitForm(e,t,i){return!1}RemovePreviousData(e,t=!1){var i,n;let o=null===(i=this.PreviousData)||void 0===i||null===(n=i.Fields)||void 0===n?void 0:n.find((t=>t.Id==e));null!==o&&(this.PreviousData.Fields.splice(this.PreviousData.Fields.indexOf(o),1),t&&this.ClearForm())}}class S extends t.ConditionProcessorBase{constructor(){super(),this.ConditionOptions=null,this.FormBuilder=null}GetExecuteOnInitialize(){return!1}ExecuteCondition(e=!1,t=null){this.Initialize(this.FormBuilder,this.ConditionOptions,t);let i=super.ExecuteCondition(e,t);return this.ConditionOptions.ConditionGroups=[],i}GetOrCreateFormBuilder(){return null==this.FormBuilder&&(this.FormBuilder=new L(1,(new o.FormBuilderOptions).Merge(),{})),this.FormBuilder}GetOrCreateCondition(){return null==this.ConditionOptions&&(this.ConditionOptions=(new i.ConditionBaseOptions).Merge()),this.ConditionOptions}ExecuteFalseAction(e){}ExecuteTruAction(e){}AddCondition(e,t,n,o=i.SubTypeEnum.Text,r=i.ConditionLineTypeEnum.Field,s=""){let l=this.GetOrCreateCondition(),d=(new i.ConditionGroupOptions).Merge({ConditionLines:[{}]});d.ConditionLines[0].FieldId=e,d.ConditionLines[0].Type=r,d.ConditionLines[0].PathId=s,d.ConditionLines[0].SubType=o,d.ConditionLines[0].Comparison=n,d.ConditionLines[0].Value=t,l.ConditionGroups.push(d)}}class E extends(x(M.FormBuilderDesignerModel)){constructor(e=1,t=null,i=null){super(e,null==t?(new o.FormBuilderOptions).Merge():t,null==i?{}:i),this.FormId=e,this.AdditionalOptions.CurrentUser={Id:1,Roles:["administrator"]}}InitializePriceCalculator(){}}class j extends T.FieldBaseModel{constructor(...e){super(...e),this.TestProperty="TestPropertyCalled"}InitializeStartingValues(e){}InternalSerialize(e){}render(){}GetNumber(){return 1}GetText(){return"a"}TestMethod(){return"TestMethod"}TestMethod2(e){return e+"executed"}TestMethod3(e,t){return e+"_"+t+"_was_executed"}GetPrice(){return 10}}class V extends R.FRDataRetriever{GetFixedValue(e,t){return null!=t&&(e=e+"_"+t.Id),this.Container.RootFormBuilder.AdditionalOptions.Attributes[e]}constructor(){super(),this.Test=new j(null,null),this.Container={},this.Container.RootFormBuilder={},this.Container.RootFormBuilder.AdditionalOptions={},this.Container.RootFormBuilder.AdditionalOptions.Attributes={},this.Container.ParseFixedField=(e,t,i)=>{if(!0===w.Sanitizer.GetValueFromPath(t,["FC"]))return C.EventManager.Publish("CallFixedFunction",{Id:e,Op:t,FieldContainer:null!=i?i.FormBuilder:this});let n=w.Sanitizer.GetValueFromPath(t,["Id"]),o=w.Sanitizer.GetValueFromPath(this,["Container","RootFormBuilder","AdditionalOptions","Attributes",e+(""==n?"":"_"+n)]);return null==o?"":o}}AddAttribute(e,t){this.Container.RootFormBuilder.AdditionalOptions.Attributes[e]=t}GetFieldById(e){return this.Test}}b.FormulaFunctionDictionary.GetOrCreateGroup("Math").AddItem("TestFunction","TestFunction","TestFunction","RNRound").AddItem("TestFunction2","TestFunction2","TestFunction","RNRound").AddItem("TestFunction3","TestFunction3","TestFunction","RNRound").AddItem("AsyncTestFunction","AsyncTestFunction","TestFunction","RNRound");class _ extends B.TextFieldModel{constructor(...e){super(...e),this.TestProperty="TestPropertyCalled"}GetNumber(){return 1}GetText(){return"a"}TestMethod(){return"TestMethod"}TestMethod2(e){return e+"executed"}TestMethod3(e,t){return e+"_"+t+"_was_executed"}GetPrice(){return 10}}e.ConditionProcessorTestUtil=S,e.FormBuilderTestUtils=L,e.FormBuilderDesignerTestUtils=E,e.ConditionBuilderUtils=class{static AddCondition(e,t,n,o=i.SubTypeEnum.Text,r=i.ConditionLineTypeEnum.Field,s="",l=null){let d;d=null==l?(new i.ConditionBaseOptions).Merge():l,r==i.ConditionLineTypeEnum.Field&&d.ElementsUsed.push((new i.ElementUsedOptions).Merge({Id:e,Type:i.ElementUsedTypeEnum.Field}));let u=(new i.ConditionGroupOptions).Merge({ConditionLines:[{}]});return u.ConditionLines[0].FieldId=e,u.ConditionLines[0].Type=r,u.ConditionLines[0].PathId=s,u.ConditionLines[0].SubType=o,u.ConditionLines[0].Comparison=n,u.ConditionLines[0].Value=t,d.ConditionGroups.push(u),d}},e.TestFRDataRetriever=V,e.TestFieldSource=_,e.TestParseText=function(e){let t=A.CustomLanguage(),i=D.EditorState.create({doc:e,extensions:[t]}),n=new V;n.AddAttribute("LastName","Smith"),n.AddAttribute("UserMeta_test","test_meta"),n.AddFunction("RNTestFunction",(()=>"Function Called")),n.AddFunction("RNTestFunction2",((e,t,i)=>t+i)),n.SetVar("MyFunctionVar","Value Retrieved from Function"),n.AddFunction("RNTestFunction3",((e,t,i)=>e.GetVar("MyFunctionVar"))),n.AddFunction("RNAsyncTestFunction",(async()=>new Promise(((e,t)=>{setTimeout((()=>{e("Async Function Called")}),100)}))));let o=(new D.Parser).Parse(i,i.tree.topNode);return console.log("PARSED STRING------------------"),console.log(JSON.stringify(o)),new y.FRMain(o.Compiled,n)};class U extends P.CalculatorBase{GetPrice(){return this.GetDummyPrice()}ExecuteCalculation(e,t){return{Quantity:1,RegularPrice:this.GetDummyPrice()}}GetDummyPrice(){return null==this.Field.Options.DummyPrice?0:this.Field.Options.DummyPrice}}C.EventManager.Subscribe("GetCalculator",(e=>{if("Dummy"==e)return new U})),e.DummyCalculator=U,Object.defineProperty(e,"__esModule",{value:!0})}));
