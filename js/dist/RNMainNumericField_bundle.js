rndefine("#RNMainNumericField",["#RNMainCore/EventManager","#RNMainFormBuilderCore/FieldBase.Options","#RNMainFormBuilderCore/FieldWithPrice.Model","lit","#RNMainCore/Sanitizer","lit/decorators","#RNMainFormBuilderCore/FieldBase","#RNMainFormBuilderCore/IconDirective","#RNMainFormBuilderCore/FieldWithPrice","lit-html/directives/live.js","#RNMainCore/StoreBase","#RNMainFormBuilderCore/FieldWithPrice.Options","#RNMainFormBuilderCore/FormBuilder.Options"],(function(e,i,t,r,s,l,a,n,u,o,h,m,d){"use strict";class c extends t.FieldWithPriceModel{constructor(e,i){super(e,i),this.IsFocused=!1}InternalSerialize(e){super.InternalSerialize(e),e.Value=this.GetValue()}GetStoresInformation(){return!0}GetIsUsed(){return!!super.GetIsUsed()&&""!=this.Text.trim()}get IsReadonly(){return!!this.Options.ReadOnly||super.IsReadonly}InternalToText(){return this.Text}GetValue(){return this.GetIsVisible()?this.Text:""}InitializeStartingValues(){this.Text=this.GetPreviousDataProperty("Value",this.Options.DefaultValue),this.MaxValue=this.Options.MaximumValue,this.MinValue=this.Options.MinimumValue}SetMaxValue(e){this.MaxValue=e,this.RemoveError("MaximumValue"),this.SetText(this.Text)}SetMinValue(e){this.MinValue=e,this.RemoveError("MinimumValue"),this.SetText(this.Text)}GetText(){return this.Text}SetText(e,i=null,t=!1){if(""==e)return this.Text="",this.RemoveError("MaximumValue"),this.RemoveError("MinimumValue"),this.Refresh(),void this.FireValueChanged();if(e=s.Sanitizer.SanitizeString(e),t){if(this.Options.NumberOfDecimals>=0&&e.indexOf(".")>=0){let i=e.indexOf(".")+this.Options.NumberOfDecimals+1;isNaN(i)||(e=e.slice(0,i))}}else e=s.Sanitizer.SanitizeNumber(e).toFixed(this.Options.NumberOfDecimals);this.Text=e,""!=this.Text.trim()&&this.RemoveError("required");let r=parseFloat(this.Text);if(isNaN(r))return this.Text="",void this.FireValueChanged();if(""!=this.MaxValue){let e=parseFloat(this.MaxValue);r>e?this.AddError("MaximumValue",RNTranslate("The maximum value is ")+e):this.RemoveError("MaximumValue")}if(""!=this.MinValue){let e=parseFloat(this.MinValue);r<e?this.AddError("MinimumValue",RNTranslate("The minimum value is ")+e):this.RemoveError("MinimumValue")}this.FireValueChanged()}render(){return r.html`<rn-numeric-field .model="${this}"></rn-numeric-field>`}}var p;let x=l.customElement("rn-numeric-field")(p=class extends u.FieldWithPrice{static get properties(){return a.FieldBase.properties}SubRender(){return r.html` <div style="position: relative;"> <input @keypress=${e=>this.OnKeyPress(e)} ${n.IconDirective(this.model.Options.Icon)} ?readOnly=${this.model.IsReadonly} @focus=${()=>{this.model.IsFocused=!0,this.model.Refresh()}} @blur=${()=>{this.model.IsFocused=!1,this.model.SetText(this.model.Text),this.model.Refresh()}} class='rnInputPrice' placeholder=${this.model.Options.Placeholder} style="width: 100%;" type='number' .value=${o.live(this.model.GetText())} @input=${e=>this.OnChange(e)}/> </div> `}OnKeyPress(e){var i=e.which?e.which:e.keyCode;return"."==e.key?0!=this.model.Options.NumberOfDecimals&&!this.model.Text.includes(".")||(e.preventDefault(),!1):!(i>31&&(i<48||i>57))||(e.preventDefault(),!1)}OnChange(e){if(e.target.value.includes(".")&&this.model.Options.NumberOfDecimals>0){let i=e.target.value.split(".");if(i.length>1&&i[1].length>this.model.Options.NumberOfDecimals)return void this.forceUpdate()}this.model.SetText(e.target.value,null,!0)}})||p;var M,O,f;let F=(M=h.StoreDataType(Object),O=class extends m.FieldWithPriceOptions{constructor(...e){super(...e),this.FreeCharOrWords=0,babelHelpers.initializerDefineProperty(this,"Icon",f,this)}LoadDefaultValues(){super.LoadDefaultValues(),this.Type=i.FieldTypeEnum.Numeric,this.Label="Numeric",this.ReadOnly=!1,this.NumberOfDecimals=2,this.MinimumValue="",this.MaximumValue="",this.IgnoreSpaces=!1,this.Icon=(new d.IconOptions).Merge(),this.Placeholder="",this.DefaultValue="",this.FreeCharOrWords=0}},f=babelHelpers.applyDecoratedDescriptor(O.prototype,"Icon",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O);exports.NumericFieldModel=c,exports.NumericField=x,exports.NumericFieldOptions=F,e.EventManager.Subscribe("GetFieldOptions",(e=>{if(e==i.FieldTypeEnum.Numeric)return new F})),e.EventManager.Subscribe("GetFieldModel",(e=>{if(e.Options.Type==i.FieldTypeEnum.Numeric)return new c(e.Options,e.Parent)}))}));
